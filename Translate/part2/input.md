# Ввод

У нас есть все компоненты игры, кроме ввода игрока.
Программа играет в саму себя, давайте что-то с этим сделаем.

Вставьте этот код под циклом `Main`.
Это тоже функция, поэтому она, как и `Memcpy` может быть использована в разных частях кода с помощью `call`.

```rgbasm,linenos,start={{#line_no_of "" ../../unbricked/input/main.asm:input-routine}}
{{#include ../../unbricked/input/main.asm:input-routine}}
```

Как вы видите, чтение ввода на Game Boy реализовано очень сложно, на данном этапе будет трудно объяснить принцип его работы.
Давайте представим, что функция волшебным образом _понимает_, что вы нажали.
Разобрались? Пойдёмте дальше.

Теперь, раз мы знаем, как использовать функции, давайте вызовем `UpdateKeys` для чтения ввода игрока.
`UpdateKeys` записывает нажатые клавиши в блок памяти под названием `wCurKeys`, который мы можем прочесть, когда функция завершает работу.
Из-за этого мы можем считывать ввод не чаще чем каждый кадр.

Это очень важно, потому что мы не можем считывать нажатия слишком часто.

Первым делом, давайте зарезервируем место для двух переменных, которые использует `UpdateKeys`; вставьте это в конец `main.asm`:

```rgbasm,linenos,start={{#line_no_of "" ../../unbricked/input/main.asm:vars}}
{{#include ../../unbricked/input/main.asm:vars}}
```

Каждая переменная должна находиться в RAM, а не в ROM, потому что мы не можем перезаписывать последний (Read-Only Memory).
Также стоит заметить, что каждая переменная требует 1 байт, поэтому мы можем использовать `db` ("Define Byte") для их резервирования.

Перед чтением переменных им надо задать нулевое значение.
Мы можем это сделать после инициализации `wFrameCounter`.

:::tip

В данном контексте _инициализация_ и _задание нулевого значения_ - одно и то же. _Прим. переводчика_

:::

```rgbasm,linenos,start={{#line_no_of "" ../../unbricked/input/main.asm:initialize-vars}}
{{#include ../../unbricked/input/main.asm:initialize-vars}}
```

В коде ниже мы используем `and` (побитовое И), который нужен для изменения флага `z` на логическое значение.
Мы также используем константы `PADF` (`PADF_RIGHT`, `PADF_LEFT`) для чтения конкретной клавиши.

```rgbasm,linenos,start={{#line_no_of "" ../../unbricked/input/main.asm:main}}
{{#include ../../unbricked/input/main.asm:main}}
```

Теперь, если вы скомпилируете проект, то сможете двигать ракетку с помощью крестовины!
Ура, у нас появились зачатки игры!
